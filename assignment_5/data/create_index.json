{
    "settings": {
        "index": {
            "number_of_shards": 3,
            "number_of_replicas": 2,
            "max_ngram_diff": 9
        },
        "analysis": {
            "analyzer": {
                "englando": {
                    "type": "custom",
                    "char_filter": [
                        "html_strip"
                    ],
                    "tokenizer": "standard",
                    "filter": [
                        "english_possessive_stemmer",
                        "lowercase",
                        "english_stop",
                        "english_stemmer"
                    ]
                },
                "custom_shingles": {
                    "type": "custom",
                    "char_filter": [
                        "html_strip"
                    ],
                    "tokenizer": "standard",
                    "filter": [
                        "lowercase",
                        "asciifolding",
                        "filter_shingles"
                    ]
                },
                "custom_ngram": {
                    "type": "custom",
                    "char_filter": [
                        "html_strip"
                    ],
                    "tokenizer": "standard",
                    "filter": [
                        "lowercase",
                        "asciifolding",
                        "filter_ngrams"
                    ]
                },
                "just_lowercase": {
                    "type": "custom",
                    "tokenizer": "standard",
                    "filter": [
                        "lowercase"
                    ]
                }
            },
            "filter": {
				"english_possessive_stemmer": {
					"type": "stemmer",
					"stem_english_possessives": true
				},
				"english_stop": {
					"type": "stop",
					"stopwords": "_english_"
				},
				"english_stemmer": {
					"type": "stemmer",
					"language": "english"
				},
				"filter_ngrams": {
					"type": "ngram",
					"min_gram": 1,
					"max_gram": 10
				},
                "filter_shingles": {
                    "type": "shingle",
                    "token_separator": " "
                }
            }
        }
    },
    "mappings": {
        "properties": {
            "author": {
                "properties": {
                    "id": {
                        "type": "long"
                    },
                    "name": {
                        "type": "text",
						"fields": {
							"name_shingle": {
								"type": "text",
								"analyzer": "custom_shingles"
							},
							"name_ngram": {
								"type": "text",
								"analyzer": "custom_ngram"
							}
						}
                    },
                    "username": {
                        "type": "text",
						"fields": {
                            "name_ngram": {
                                "type": "text",
                                "analyzer": "custom_ngram"
                            }
                        }
                    },
                    "description": {
                        "type": "text",
						"analyzer": "englando",
						"fields": {
                            "description_shigles": {
                                "type": "text",
                                "analyzer": "custom_shingles"
                            }
                        }
                    },
                    "followers_count": {
                        "type": "integer"
                    },
                    "following_count": {
                        "type": "integer"
                    },
                    "tweet_count": {
                        "type": "integer"
                    },
                    "listed_count": {
                        "type": "integer"
                    }
                }
            },
            "annotations": {
                "type": "nested",
                "properties": {
                    "id": {
                        "type": "long"
                    },
                    "value": {
                        "type": "keyword"
                    },
                    "type": {
                        "type": "keyword"
                    },
                    "probability": {
                        "type": "half_float"
                    }
                }
            },
            "domains": {
                "type": "nested",
                "properties": {
                    "id": {
                        "type": "long"
                    },
                    "name": {
                        "type": "text"
                    },
                    "desc": {
                        "type": "text"
                    }
                }
            },
            "entitiies": {
                "type": "nested",
                "properties": {
                    "id": {
                        "type": "long"
                    },
                    "name": {
                        "type": "text"
                    },
                    "desc": {
                        "type": "text"
                    }
                }
            },
            "hashtags": {
                "type": "nested",
                "properties": {
                    "id": {
                        "type": "long"
                    },
                    "tag": {
                        "type": "keyword",
                        "analyzer": "just_lowercase"
                    }
                }
            },
            "links": {
                "type": "nested",
                "properties": {
                    "id": {
                        "type": "long"
                    },
                    "tweet_id": {
                        "type": "long"
                    },
                    "url": {
                        "type": "keyword"
                    },
                    "title": {
                        "type": "keyword"
                    },
                    "description": {
                        "type": "keyword"
                    }
                }
            },
            "metadata": {
                "properties": {
                    "id": {
                        "type": "long"
                    },
					"parent_id": {
						"type": "long"
					},
					"type": {
                        "type": "keyword"
                    },
                    "content": {
                        "type": "text",
						"analyzer": "englando"
                    },
                    "possibly_sensitive": {
                        "type": "boolean"
                    },
                    "language": {
                        "type": "keyword"
                    },
                    "source": {
                        "type": "keyword"
                    },
                    "retweet_count": {
                        "type": "integer"
                    },
                    "reply_count": {
                        "type": "integer"
                    },
                    "like_count": {
                        "type": "integer"
                    },
                    "quote_count": {
                        "type": "integer"
                    },
                    "created_at": {
                        "type": "date"
                    }
                }
            }
        }
    }
}